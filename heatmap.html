<!doctype html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="content-type" />
	<meta charset="utf-8">
	<title>ESPN Cricinfo - Match Centre</title>
	<link rel="stylesheet" href="./css/styles.css">
</head>
<style type="text/css" media="screen">
	html{
		font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
	}
	body{
		background: #f0f7ff;
	}
	.espn-gfx{
		float:left;
		clear:both;
		padding-bottom:10px;
	}
</style>
<body>
	
	<div id="espn-heatmap" class="espn-gfx"></div>
	<div id="espn-heatmap2" class="espn-gfx"></div>
	<script src="./bower_components/d3/d3.js"></script>
	<script src="./bower_components/d3.chart/d3.chart.js"></script>
	<script src="./js/espn.gfx.heatmap.js"></script>
	
	<script>

	var interval = 4000;


	function getRandom(){

		var index,
			ar = [
				{runs: Math.round((Math.random() * 10)), zone : 1},
				{runs: Math.round((Math.random() * 10)), zone : 2},
				{runs: Math.round((Math.random() * 10)), zone : 3},
				{runs: Math.round((Math.random() * 100)), zone : 4},
				{runs: Math.round((Math.random() * 10)), zone : 5},
				{runs: Math.round((Math.random() * 10)), zone : 6},
				{runs: Math.round((Math.random() * 100)), zone : 7},
				{runs: Math.round((Math.random() * 100)), zone : 8},
				{runs: Math.round((Math.random() * 100)), zone : 9},
				{runs: Math.round((Math.random() * 10)), zone : 10},
				{runs: Math.round((Math.random() * 100)), zone : 11},
				{runs: Math.round((Math.random() * 100)), zone : 12},
				{runs: Math.round((Math.random() * 100)), zone : 13},
				{runs: Math.round((Math.random() * 100)), zone : 14},
				{runs: Math.round((Math.random() * 100)), zone : 15},
				{runs: Math.round((Math.random() * 10)), zone : 16},
				{runs: Math.round((Math.random() * 100)), zone : 17},
				{runs: Math.round((Math.random() * 100)), zone : 18},
				{runs: Math.round((Math.random() * 100)), zone : 19},
				{runs: Math.round((Math.random() * 10)), zone : 20},
				{runs: Math.round((Math.random() * 10)), zone : 21},
				{runs: Math.round((Math.random() * 10)), zone : 22},
				{runs: Math.round((Math.random() * 10)), zone : 23},
				{runs: Math.round((Math.random() * 10)), zone : 24},
				{runs: Math.round((Math.random() * 10)), zone : 25}
			],
			c = 0;

		for(var i=0, len = ar.length; i < len; i++){
			if(ar[i].runs > c){
				c = ar[i].runs;
				index = i;
			}
		}

		ar[index].max = true;

		var random = Math.floor(Math.random() * 8) + 1;
		ar[random].wickets = 1;
		return ar;
	}

	setInterval(function(){
		heatmap.draw(getRandom());
		heatmap2.draw(getRandom());
	},interval);

	var heatmap = d3.select("#espn-heatmap")
	.chart("heatmap",{
		width : 100,
		height : 130,
		legends : true
	});

	heatmap.draw(getRandom());

	var heatmap2 = d3.select("#espn-heatmap2")
	.chart("heatmap",{
		width : 140,
		height : 190,
		legends : true
	});

	heatmap2.draw(getRandom());

	</script>
</body>